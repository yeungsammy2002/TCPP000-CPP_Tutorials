# Section 6 - Compiler Generated Functions

In the section of ***Compiler Generated Methods* (`C01b-Advanced_cpp.md`, Section 04)**, we have four methods that the compiler will generated if you don't declare them by yourself. So basically if you have a class `Dog`, and it looks empty. But it is not really empty, the compiler will generate some special methods for you:
```
class Dog{};
```
What we have talked about is for ***C++03***. It will generate methods:
1. ***Default constructor*** - The ***default constructor*** is not always generated. It is generated only if no constructor is declared by user.
2. ***Copy constructor***
3. ***Copy assignment operator***
4. ***Destructor***

Now we have ***C++11***, ***C++11*** has two more special methods that might be generated by the compiler, which are ***move constructor*** and ***move assignment operator***. ***C++11*** not only has added the two more compiler generated methods, it also have added more rules on how to generate those methods:
1. ***Default constructor***
2. ***Copy constructor*** - The ***copy constructor*** will **NOT** be generated if you have declared your own ***move constructor*** or ***move assignment operator***.
3. ***Copy assignment operator*** - The ***copy assignment operator*** will be generated only if ***move constructor*** or ***move assignment operator*** **NOT** declared by user.
4. ***Destructor***
5. ***Move constructor*** - The ***move constructor*** will **NOT** be generated if you have declared your own ***copy constructor***, or ***copy assignment operator***, or ***destructor***, or ***move assignment operator***.
6. ***Move assignment operator*** - The ***move assignment operator*** will be generated only if ***copy constructor***, or ***copy assignment operator***, or ***destructor***, or ***move constructor*** **NOT** declared by user.

So the generation of the ***move constructor*** and the ***move assignment operator*** is pretty restrictive. Most of the time, they will not be generated by compiler. In summary, what ***C++11*** has added to the picture is the ***move constructor*** and ***move assignment operator*** with some conditions.

This seemingly empty cast `Dog` is equivalent to something like this. A class `Dog` with ***default constructor***, ***copy constructor***, ***copy assignment operator***, ***destructor***, ***move constructor***, and ***move assignment operator***:
```
class Dog {
    // C++03:
    Dog();                          // default constructor
    Dog(const Dog&);                // copy constructor
    Dog& operator=(const Dog&);     // copy assignment operator
    ~Dog();                         // destructor

    // C++11:
    Dog(Dog&&);                     // move constructor
    Dog& operator=(Dog&&);          // move assignment operator
};
```

Having understand that, let's look at some examples. We have a class `Cat`, and `Cat` has a ***copy constructor***:
```
class Cat {
    Cat(const Cat&) {}      // copy constructor
};
```
What methods will be generated by the compiler for the `Cat` class? The ***default constructor*** will not be generated because we already have a constructor. The ***copy assignment operator*** and the ***destructor*** will be generated. The ***move constructor*** and the ***move assignment operator*** will be generated because the ***copy constructor*** is declared by user.

So the methods that will be generated for the `Cat` class are the ***copy assignment operator*** and the ***destructor***.


Now let's look at the second exmaple. We have a class `Duck`, and the `Duck` has a ***move constructor***.
```
class Duck {
    Duck(Duck&&) {}         // move constructor
}
```
What methods will be generated for the class `Duck`? ***Default constructor***? No. ***Copy constructor***? No, because we have defined a ***move constructor***. ***Copy assignment operator***? No. ***Destrcutor***? Yes. And ***move assignment operator***? No. So what we will get is the ***destructor*** only.

The `Duck` is actually represent a pretty useful case, it is an object that can only be moved constructed. It cannot be copied. In real life application, things like ***mutex*** or ***sockets***, which should only be moved and should not be copied. For the purpose of completeness, the methods that will be generated for `Dog` are all compiler generated methods:
```
class Dog{};
```
Same as below behind the scenes:
```
class Dog {
    Dog();                          // default constructor
    Dog(const Dog&);                // copy constructor
    Dog& operator=(const Dog&);     // copy assignment operator
    ~Dog();                         // destructor
    Dog(Dog&&);                     // move constructor
    Dog& operator=(Dog&&);          // move assignment operator
};
```


Now let's look at another example. class `Frog` has a method as below. Now what will happen to this class?
```
class Frog {
    Frog(Frog&&, int = 0) {}
};
```
So this method `Frog(Frog&&, int = 0) {}` is actually a ***move constructor***, because when the second parameter is not specified. The `Frog` can be constructed from the ***r-value*** of another `Frog`. So the class `Frog` is the same as class `Duck`, only the ***destructor*** will be generated.

As a side note, if you have a constructor `Frog`, which takes an integer as a parameter with the default value, then this is a ***default constructor***. If you have a constructor that takes `const Frog&` and `int = 0`, this is a ***copy constructor***:
```
class Frog {
    Frog(Frog&&, int = 0) {}        // move constructor
    Frog(int = 0) {}                // default constructor
    Frog(const Frog&, int = 0) {}   // copy constructor
};
```


Now let's look at another example. We have a class `Fish`, and `Fish` has a ***destructor***. What methods will be generated for this class?
```
class Fish {
    ~Fish() {}
}
```
The ***default constructor***? Yes, because there's no constructor being declared. ***Copy constructor***? Yes. ***Copy assignment operator***? Yes. ***Move constructor*** and ***Move assignment operator***? No, because we have a ***destructor*** being declared. So what will be generated for `Fish` is ***default constructor***, ***copy constructor*** and ***copy assignment operator***.


Now let's look at a tricky one. We have a class `Cow`, which has a ***copy assignment operator*** that is **being deleted**. What methods will be generated for the class `Cow`?
```
class Cow {
    Cow& operator=(const Cow&) = delete;
}
```


# 6 - 9:14
